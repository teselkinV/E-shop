{"ast":null,"code":"import _toConsumableArray from\"/Users/vladimir/Desktop/E-shop/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _objectSpread from\"/Users/vladimir/Desktop/E-shop/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _classCallCheck from\"/Users/vladimir/Desktop/E-shop/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/vladimir/Desktop/E-shop/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/Users/vladimir/Desktop/E-shop/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/vladimir/Desktop/E-shop/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from'react';import{menProducts,detailProduct}from'./data';var ProductContext=React.createContext();var ProductProvider=/*#__PURE__*/function(_Component){_inherits(ProductProvider,_Component);var _super=_createSuper(ProductProvider);function ProductProvider(){var _this;_classCallCheck(this,ProductProvider);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={products:[],detailProduct:detailProduct,cart:[],modalOpen:false,modalProduct:detailProduct,itemsTotal:0,salesTax:0,cartTotal:0};_this.setProducts=function(){var products=[];menProducts.forEach(function(item){var singleItem=_objectSpread({},item);products=[].concat(_toConsumableArray(products),[singleItem]);});_this.setState(function(){return{products:products};});};_this.getItem=function(id){var product=_this.state.products.find(function(item){return item.id===id;});return product;};_this.handleDetail=function(id){var product=_this.getItem(id);_this.setState(function(){return{detailProduct:product};});};_this.addToCart=function(id){var tempProducts=_toConsumableArray(_this.state.products);var index=tempProducts.indexOf(_this.getItem(id));var product=tempProducts[index];product.inCart=true;product.count=1;var price=product.price;product.total=price;var size=product.size;product.size=size;_this.setState(function(){return{products:tempProducts,cart:[].concat(_toConsumableArray(_this.state.cart),[product])};},function(){_this.addTotals();});};_this.openModal=function(id){var product=_this.getItem(id);_this.setState(function(){return{modalProduct:product,modalOpen:true};});};_this.closeModal=function(){_this.setState(function(){return{modalOpen:false};});};_this.increment=function(id){var tempCart=_toConsumableArray(_this.state.cart);var selectedItem=tempCart.find(function(item){return item.id===id;});var index=tempCart.indexOf(selectedItem);var product=tempCart[index];product.count=product.count+1;product.total=product.count*product.price;_this.setState(function(){return{cart:_toConsumableArray(tempCart)};},function(){_this.addTotals();});};_this.decrement=function(id){var tempCart=_toConsumableArray(_this.state.cart);var selectedItem=tempCart.find(function(item){return item.id===id;});var index=tempCart.indexOf(selectedItem);var product=tempCart[index];product.count=product.count-1;if(product.count===0){_this.removeItem(id);}else{product.total=product.count*product.price;_this.setState(function(){return{cart:_toConsumableArray(tempCart)};},function(){_this.addTotals();});}};_this.removeItem=function(id){var tempProducts=_toConsumableArray(_this.state.products);var tempCart=_toConsumableArray(_this.state.cart);tempCart=tempCart.filter(function(item){return item.id!==id;});var index=tempProducts.indexOf(_this.getItem(id));var removedProduct=tempProducts[index];removedProduct.inCart=false;removedProduct.count=0;removedProduct.total=0;_this.setState(function(){return{cart:_toConsumableArray(tempCart),products:_toConsumableArray(tempProducts)};},function(){_this.addTotals();});};_this.clearCart=function(){_this.setState(function(){return{cart:[]};},function(){_this.setProducts();_this.addTotals();});};_this.addTotals=function(){var suboTotal=0;_this.state.cart.map(function(item){return suboTotal+=item.total;});var tempTax=suboTotal*0.0775;var tax=parseFloat(tempTax.toFixed(2));var total=suboTotal+tax;var subTotal=parseFloat(suboTotal.toFixed(2));_this.setState(function(){return{itemsTotal:subTotal,salesTax:tax,cartTotal:total};});};return _this;}_createClass(ProductProvider,[{key:\"componentDidMount\",value:function componentDidMount(){this.setProducts();}},{key:\"render\",value:function render(){return/*#__PURE__*/React.createElement(ProductContext.Provider,{value:_objectSpread(_objectSpread({},this.state),{},{handleDetail:this.handleDetail,addToCart:this.addToCart,openModal:this.openModal,closeModal:this.closeModal,increment:this.increment,decrement:this.decrement,removeItem:this.removeItem,clearCart:this.clearCart})},this.props.children);}}]);return ProductProvider;}(Component);export{ProductProvider as default};;var ProductConsumer=ProductContext.Consumer;export{ProductProvider,ProductConsumer};","map":{"version":3,"sources":["/Users/vladimir/Desktop/E-shop/src/context.js"],"names":["React","Component","menProducts","detailProduct","ProductContext","createContext","ProductProvider","state","products","cart","modalOpen","modalProduct","itemsTotal","salesTax","cartTotal","setProducts","forEach","item","singleItem","setState","getItem","id","product","find","handleDetail","addToCart","tempProducts","index","indexOf","inCart","count","price","total","size","addTotals","openModal","closeModal","increment","tempCart","selectedItem","decrement","removeItem","filter","removedProduct","clearCart","suboTotal","map","tempTax","tax","parseFloat","toFixed","subTotal","props","children","ProductConsumer","Consumer"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport {menProducts, detailProduct} from './data';\nconst ProductContext = React.createContext();\n\nexport default class ProductProvider extends Component {\n    state = {\n        products: [],\n        detailProduct: detailProduct,\n        cart: [],\n        modalOpen: false,\n        modalProduct: detailProduct,\n        itemsTotal: 0,\n        salesTax: 0,\n        cartTotal: 0,\n\n\n    };\n    componentDidMount() {\n        this.setProducts();\n    }\n    setProducts = () => {\n        let products = [];\n        menProducts.forEach(item => {\n            const singleItem = {...item};\n            products = [...products, singleItem];\n        })\n        this.setState(() => {\n            return {products}\n        });\n    };\n    getItem = id => {\n        const product = this.state.products.find(item => item.id === id);\n        return product;\n    }\n\n    handleDetail = id => {\n        const product = this.getItem(id);\n        this.setState(() => {\n            return {detailProduct:product}\n        });\n    };\n    addToCart = id => {\n        let tempProducts = [...this.state.products];\n        const index = tempProducts.indexOf(this.getItem(id));\n        let product = tempProducts[index];\n        product.inCart = true;\n        product.count = 1;\n        const price = product.price;\n        product.total = price;\n        const size = product.size;\n        product.size = size;\n\n        this.setState(() => {\n            return { products: tempProducts, cart: [...this.state.cart, product]};\n            },\n        () => {\n            this.addTotals();\n            }\n        );\n    };\n    openModal = id => {\n        const product = this.getItem(id);\n        this.setState(() => {\n            return { modalProduct: product, modalOpen: true }\n        });\n    };\n    closeModal = () => {\n        this.setState(() => {\n            return { modalOpen: false }\n        })\n    };\n    increment = id => {\n        let tempCart = [...this.state.cart];\n        const selectedItem = tempCart.find(item => item.id === id);\n        const index = tempCart.indexOf(selectedItem);\n        const product = tempCart[index];\n        product.count = product.count + 1;\n        product.total = product.count * product.price;\n        this.setState(() => {\n            return {\n                cart: [...tempCart]\n            }\n        }, () => {\n            this.addTotals();\n        })\n    };\n\n    decrement = id => {\n        let tempCart = [...this.state.cart];\n        const selectedItem = tempCart.find(item => item.id === id);\n        const index = tempCart.indexOf(selectedItem);\n        const product = tempCart[index];\n        product.count = product.count - 1;\n\n        if(product.count === 0) {\n            this.removeItem(id);\n        } else {\n            product.total = product.count * product.price;\n            this.setState(() => {\n                return {\n                    cart: [...tempCart]\n                }\n            }, () => {\n                this.addTotals();\n            })\n        }\n    };\n\n    removeItem = (id) => {\n        let tempProducts = [...this.state.products];\n        let tempCart = [...this.state.cart];\n        tempCart = tempCart.filter(item => item.id !== id);\n        const index = tempProducts.indexOf(this.getItem(id));\n        let removedProduct = tempProducts[index];\n        removedProduct.inCart = false;\n        removedProduct.count = 0;\n        removedProduct.total = 0;\n        this.setState(() => {\n            return {\n                cart:[...tempCart],\n                products:[...tempProducts]\n            };\n        },\n        () => {\n            this.addTotals();\n        })\n    };\n\n    clearCart = () => {\n        this.setState(() => {\n            return {cart: []};\n        }, () => {\n            this.setProducts();\n            this.addTotals();\n        })\n    };\n\n    addTotals = () => {\n        let suboTotal = 0;\n        this.state.cart.map(item => (suboTotal += item.total));\n        const tempTax = suboTotal * 0.0775;\n        const tax = parseFloat(tempTax.toFixed(2));\n        const total = suboTotal + tax;\n        const subTotal = parseFloat(suboTotal.toFixed(2));\n        this.setState(() => {\n            return {\n                itemsTotal: subTotal,\n                salesTax: tax,\n                cartTotal: total,\n            }\n        })\n    }\n\n\n\n    render() {\n        return (\n            <ProductContext.Provider value={{\n                ...this.state,\n                handleDetail: this.handleDetail,\n                addToCart: this.addToCart,\n                openModal: this.openModal,\n                closeModal: this.closeModal,\n                increment: this.increment,\n                decrement: this.decrement,\n                removeItem: this.removeItem,\n                clearCart: this.clearCart,\n            }}>\n                {this.props.children}\n                </ProductContext.Provider>\n        )\n    }\n};\n\nconst ProductConsumer = ProductContext.Consumer;\n\nexport {ProductProvider, ProductConsumer};"]},"metadata":{},"sourceType":"module"}